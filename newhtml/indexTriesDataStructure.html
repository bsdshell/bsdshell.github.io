<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-GB">
<head>
    <title>$title</title>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <meta name="description" content="Xcode Change Build from iPhone to Universal iPad " />
    <meta name="keywords" content="Build iPhone and iPad, Change Xcode Build Target " />
    <meta name="robots" content="index, follow" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="../screen.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="../highlight.css">
    <link rel="stylesheet" type="text/css" href="../style.css">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <script type="text/x-mathjax-config">
          MathJax.Hub.Config({
            extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js"],
            jax: ["input/TeX","output/HTML-CSS"],
            tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]}
          });
    </script>
    <script type="text/javascript" src="../MathJax-2.6-latest/MathJax.js"></script>
</head>
<body>
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-66282017-2', 'auto');
  ga('send', 'pageview');
</script>
<div class="myclass">
<div class="mytitle">
Haskell newIORef readIORef writeIORef
</div>
<pre class="mytext">
Mutable variables are not used often in Haskell, but there is time that you need to 
use mutable variables in your code. There are many ways to create mutable variables.

Here is how to use mutable variables in Haskell
The idea is very simple:
1. Create a mutable variable
2. Modify or write the variable 
3. Read the variable whatever the new value is inside.

</pre>
<pre class="prettyprint">
var <- newIORef 2
x <- readIORef var
print x 
writeIORef var 100
x1 <- readIORef var
print x1
-------------------------------------------------------------------
import Data.IORef
ref <- newIORef 0
replicateM_ 4 $ modifyIORef ref (+5)
readIORef ref >>= print  -- output 20

ref <- newIORef 1 
replicateM_ 4 $ modifyIORef ref (+5)
readIORef ref >>= print  -- output 21

-- modify (Set Int)
set <- newIORef Set.empty 
modifyIORef (Set.insert 2) 
set <- readIORef set 
</pre> 

<div class="mytitle">
Haskell Mutable Loop, it is wrong way to do thing
</div>
<pre class="prettyprint">
total <- newIORef 0
let loop i = 
        if i > 100
            then do 
                 readIORef total
            else do
                 modifyIORef total (+1)
                 pp $ "i=" <<< i
                 loop (i + 1)

loop 1
</pre> 

</div>
</body>
</html>

